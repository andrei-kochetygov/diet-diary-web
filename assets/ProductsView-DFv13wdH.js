import{u as B,c as M,b as O,F as f,g as j,h as C,i as v,a as H,w as G,j as Q,_ as s,d as R,T as q,k as z,l as L}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-GBUriouV.js";import{b as J,B as K,c as _,T as W,a as X,_ as Y}from"./Input.vue_vue_type_script_setup_true_lang-BeKPNiSG.js";import{a as F,c as N,u as A,r as Z,w as h,o as V,i as S,f as e,e as t,h as b,g as l,t as i,n as ee,m as te,k as U,b as $,p as E,j as ae,F as le}from"./index-BlQq-XYI.js";import{N as I,_ as de}from"./Modal.vue_vue_type_script_setup_true_lang-DfU8_Asu.js";var se={root:{base:"pixqkr0"}};const ue=F({__name:"ProductForm",props:{productId:{}},emits:["success"],setup(k,{emit:g}){const y=k,P=g,c=N(()=>y.productId!==null),m=A(),p={calories:0,carbohydrates:0,createdAt:new Date().toISOString(),fats:0,fibers:0,name:"",nutrientsPer:I.HundredGrams,ownerId:m.uid,proteins:0},d=Z({...p}),a=B({collectionName:"products",documentId:()=>y.productId}),u=M({collectionName:"products"}),T=O({collectionName:"products",documentId:()=>y.productId});async function x(){c.value&&await T.mutateAsync(d),c.value||await u.mutateAsync(d),P("success")}h(a.data,w=>{w?Object.assign(d,w):Object.assign(d,{...p})});const D=N(()=>({[se.root.base]:!0}));return(w,o)=>(V(),S("form",{class:ee(D.value),onSubmit:te(x,["prevent"])},[e(f,{label:"Name"},{default:t(({id:n})=>[e(J,{modelValue:d.name,"onUpdate:modelValue":o[0]||(o[0]=r=>d.name=r),id:n,placeholder:"Enter product name..."},null,8,["modelValue","id"])]),_:1}),e(f,{label:"Nutrients per"},{default:t(({id:n})=>[e(j,{modelValue:d.nutrientsPer,"onUpdate:modelValue":o[1]||(o[1]=r=>d.nutrientsPer=r),id:n},{default:t(()=>[e(C,{value:b(I).HundredGrams},{default:t(()=>o[7]||(o[7]=[l("100g")])),_:1},8,["value"]),e(C,{value:b(I).Product},{default:t(()=>o[8]||(o[8]=[l("Product")])),_:1},8,["value"])]),_:2},1032,["modelValue","id"])]),_:1}),e(f,{label:"âš¡ï¸ Calories"},{default:t(({id:n})=>[e(v,{modelValue:d.calories,"onUpdate:modelValue":o[2]||(o[2]=r=>d.calories=r),id:n,placeholder:"Enter calories..."},null,8,["modelValue","id"])]),_:1}),e(f,{label:"ðŸ¥© Proteins"},{default:t(({id:n})=>[e(v,{modelValue:d.proteins,"onUpdate:modelValue":o[3]||(o[3]=r=>d.proteins=r),id:n,placeholder:"Enter proteins..."},null,8,["modelValue","id"])]),_:1}),e(f,{label:"ðŸ§€ Fats"},{default:t(({id:n})=>[e(v,{modelValue:d.fats,"onUpdate:modelValue":o[4]||(o[4]=r=>d.fats=r),id:n,placeholder:"Enter fats..."},null,8,["modelValue","id"])]),_:1}),e(f,{label:"ðŸ¥” Carbohydrates"},{default:t(({id:n})=>[e(v,{modelValue:d.carbohydrates,"onUpdate:modelValue":o[5]||(o[5]=r=>d.carbohydrates=r),id:n,placeholder:"Enter carbohydrates..."},null,8,["modelValue","id"])]),_:1}),e(f,{label:"ðŸ¥¦ Fibers"},{default:t(({id:n})=>[e(v,{modelValue:d.fibers,"onUpdate:modelValue":o[6]||(o[6]=r=>d.fibers=r),id:n,placeholder:"Enter fibers..."},null,8,["modelValue","id"])]),_:1}),e(_,{type:"submit",severity:b(K).Primary},{default:t(()=>[l(i(c.value?"Update product":"Add product"),1)]),_:1},8,["severity"])],34))}}),oe={class:"page"},ne={class:"stack"},re=F({__name:"ProductsView",setup(k){const g=A(),y=H({constraints:[G("ownerId","==",g.uid)],name:"products"});async function P(d){p.value=d,m.value=!0}async function c(){p.value=null,m.value=!0}const m=U(!1),p=U(null);return(d,a)=>(V(),$(Q,null,{default:t(()=>[E("div",oe,[e(de,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=u=>m.value=u),style:{width:"400px",padding:"1em"}},{default:t(()=>[e(ue,{productId:p.value,onSuccess:a[0]||(a[0]=u=>m.value=!1)},null,8,["productId"]),e(_,{onClick:a[1]||(a[1]=u=>m.value=!1),style:{"margin-top":"0.5em",width:"100%"}},{default:t(()=>a[3]||(a[3]=[l("Close")])),_:1})]),_:1},8,["modelValue"]),E("div",ne,[e(Y,{type:b(W).Heading1,severity:b(X).Primary,block:""},{default:t(()=>a[4]||(a[4]=[l("Products")])),_:1},8,["type","severity"]),e(_,{onClick:c},{default:t(()=>a[5]||(a[5]=[l("Add product")])),_:1})]),e(R,null,{header:t(()=>[e(s,{heading:""},{default:t(()=>a[6]||(a[6]=[l("Name")])),_:1}),e(s,{heading:""},{default:t(()=>a[7]||(a[7]=[l("Nutrients per")])),_:1}),e(s,{heading:""},{default:t(()=>a[8]||(a[8]=[l("âš¡ï¸ Calories")])),_:1}),e(s,{heading:""},{default:t(()=>a[9]||(a[9]=[l("ðŸ¥© Proteins")])),_:1}),e(s,{heading:""},{default:t(()=>a[10]||(a[10]=[l("ðŸ§€ Fats")])),_:1}),e(s,{heading:""},{default:t(()=>a[11]||(a[11]=[l("ðŸ¥” Carbohydrates")])),_:1}),e(s,{heading:""},{default:t(()=>a[12]||(a[12]=[l("ðŸ¥¦ Fibers")])),_:1}),e(s,{heading:""},{default:t(()=>a[13]||(a[13]=[l("Created at")])),_:1}),e(s,{heading:""},{default:t(()=>a[14]||(a[14]=[l("Updated at")])),_:1}),e(s,{heading:""})]),default:t(()=>[(V(!0),S(le,null,ae(b(y).data.value,u=>(V(),$(q,{key:u.name},{default:t(()=>[e(s,null,{default:t(()=>[l(i(u.name),1)]),_:2},1024),e(s,null,{default:t(()=>[l(i(u.nutrientsPer??"Product"),1)]),_:2},1024),e(s,null,{default:t(()=>[l(i(u.calories??0),1)]),_:2},1024),e(s,null,{default:t(()=>[l(i(u.proteins??0),1)]),_:2},1024),e(s,null,{default:t(()=>[l(i(u.fats??0),1)]),_:2},1024),e(s,null,{default:t(()=>[l(i(u.carbohydrates??0),1)]),_:2},1024),e(s,null,{default:t(()=>[l(i(u.fibers??0),1)]),_:2},1024),e(s,null,{default:t(()=>[l(i(u.createdAt),1)]),_:2},1024),e(s,null,{default:t(()=>[l(i(u.updatedAt),1)]),_:2},1024),e(s,null,{default:t(()=>[e(_,{block:"",onClick:()=>P(u.id)},{default:t(()=>a[15]||(a[15]=[l("Edit")])),_:2},1032,["onClick"]),e(z,{block:"",collectionName:"products",documentId:u.id},{default:t(()=>a[16]||(a[16]=[l("Delete")])),_:2},1032,["documentId"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}))}}),be=L(re,[["__scopeId","data-v-5c7d86df"]]);export{be as default};
